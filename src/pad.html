<!DOCTYPE html>

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8" />
  <title>하루패드</title>

  <!-- Included CSS Files (Compressed) -->
  <link rel="stylesheet" href="../lib/codemirror-3.02/lib/codemirror.css">
  <link rel="stylesheet" href="../lib/codemirror-3.02/theme/solarized.css">
  <link rel="stylesheet" href="stylesheets/app.css">

  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script src="http://code.jquery.com/jquery-migrate-1.1.0.min.js"></script>

  <script src="../lib/codemirror-3.02/lib/codemirror.js"></script>
  <script src="../lib/codemirror-3.02/addon/edit/continuelist.js"></script>
  <script src="../lib/codemirror-3.02/mode/xml/xml.js"></script>
  <script src="../lib/codemirror-3.02/keymap/vim.js"></script>
  <script src="../lib/codemirror-3.02/mode/markdown/markdown.js"></script>
  <script src="../lib/marked.js"></script>
</head>
<body>

  <div id="editor"><textarea id="code" name="code"></textarea>
  </div>
  <div id="spliter">
  </div>
  <div id="viewer">
  </div>
  
  <!-- Initialize JS Plugins -->
  <script src="javascripts/app.js"></script>
  
  <script>
    var res;
    var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
      mode: 'markdown',
      lineNumbers: true,
      theme: "solarized light",
      keyMap: "vim",
      viewportMargin: 40,
      // height: "100%",
      extraKeys: {"Enter": "newlineAndIndentContinueMarkdownList"}
    });

    marked.setOptions({
      gfm: true,
      tables: true,
      breaks: false,
      pedantic: false,
      sanitize: true,
      smartLists: true,
      langPrefix: 'language-',
      highlight: function(code, lang) {
        if (lang === 'js') {
          return highlighter.javascript(code);
        }
        return code;
      }
    });

    editor.on("change", function() {
      res = marked(editor.getValue());
      $('#viewer').html(res);
    });
  </script>

</body>
</html>
